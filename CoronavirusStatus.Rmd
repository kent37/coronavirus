---
title: "Coronavirus Dashboard"
date: '`r Sys.Date()`'
output: html_document
---

```{r parameters, echo=FALSE,include=FALSE,message=FALSE}
knitr::opts_chunk$set(echo=FALSE,fig.width=10, fig.height=8, comment=NA, warning=FALSE, message=FALSE)
```

## {.tabset .tabset-pills}

### Cases by country

```{r growth}
source('growth_chart.R')
nrows = ceiling(length(unique(to_plot_country$Country))/4)
```

#### {.tabset}

##### Selected {.tabset}

###### Linear

```{r selected_country_plot, fig.height=6, fig.width=8}
print(selected_country_plot)
```

###### Log

```{r selected_country_log_plot, fig.height=6, fig.width=8}
print(selected_country_log_plot)
```

##### Growth

```{r growth_chart, fig.height=nrows*2.2+0.5}
print(growth_chart)
```

##### Totals

```{r growth_totals, fig.height=nrows*1.2+0.5}
print(growth_totals)
```

### Deaths by country

```{r deaths}
source('death_chart.R')
nrows = ceiling(length(unique(to_plot_deaths$Country))/4)
```

#### {.tabset}

##### Selected {.tabset}

###### Linear

```{r selected_death_plot, fig.height=6, fig.width=8}
print(selected_death_plot)
```

###### Log

```{r selected_death_log_plot, fig.height=6, fig.width=8}
print(selected_death_log_plot)
```

##### Growth

```{r death_chart, fig.height=nrows*2.2+0.5}
print(death_chart)
```

##### Totals

```{r death_totals, fig.height=nrows*1.2+0.5}
print(death_totals)
```

### Cases by US states

```{r growth_us}
source('growth_chart_us_states.R')
nrows = ceiling(length(unique(to_plot_us$State))/4)
```

#### {.tabset}

##### Selected {.tabset}

###### Linear

```{r selected_states_plot, fig.height=6, fig.width=8}
print(selected_states_plot)
```

###### Log

```{r selected_states_log_plot, fig.height=6, fig.width=8}
print(selected_states_log_plot)
```

##### Growth

```{r growth_chart_us, fig.height=nrows*2.2+0.5}
print(growth_chart_us)
```

##### Totals

```{r growth_us_totals, fig.height=nrows}
print(growth_us_totals)
```

### Deaths by US states

```{r death_us}
source('death_chart_us_states.R')
nrows = ceiling(length(unique(to_plot_us_death$State))/4)
death_rows = ceiling(length(unique(totals_only$State))/4)
```

#### {.tabset}

##### Selected {.tabset}

###### Linear

```{r selected_us_death_plot, fig.height=6, fig.width=8}
print(selected_us_death_plot)
```

###### Log

```{r selected_us_death_log_plot, fig.height=6, fig.width=8}
print(selected_us_death_log_plot)
```

##### Growth

```{r death_chart_us, fig.height=nrows*2+0.5}
print(death_chart_us)
```

##### Totals

```{r death_us_totals, fig.height=death_rows+0.5}
print(death_us_totals)
```

### About

<big>
Country data is from the Johns Hopkins Center for Systems Science and Engineering
GitHub repository
at https://github.com/CSSEGISandData/COVID-19.

Data for US states is from USAFacts
https://usafacts.org/visualizations/coronavirus-covid-19-spread-map/.

The chart style was inspired by this 
[Financial Times article](https://www.ft.com/content/a26fbf7e-48f8-11ea-aeb3-955839e06441) which is ~~unfortunately~~ no longer behind a paywall.

The charts show all countries or states where the number of cases or deaths
has been greater than
the indicated threshold for five days or more.

Data analysis and visualization by Kent Johnson. 
[GitHub source](https://github.com/kent37/coronavirus)

</big>

<small>Copyright `r format(Sys.Date(), '%Y')` Kent S Johnson
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0;vertical-align:middle;display:inline" 
  src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" target="_blank"/></a>
  <span style='float:right;font-style: italic;'>`r Sys.Date()`</span></small>